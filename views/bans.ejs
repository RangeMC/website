<%- include('_header.ejs', { title: `Бан-лист сервера`, userLogin: userLogin }) %>
<div class="text-center">
    <span class="white-color">
        <div id="head" class="parallax">
            <h1>RangeMC Project</h1>
            <h3>Комплекс серверов Minecraft</h3>
        </div>
        <br><div style="padding: 20px 20px 20px 20px; background-color: black; color: white;" class="w-70 mx-auto window breakpoint-768-i">
        <h5>Список наказаний</h5>
        <br><div class="table table-responsive">
            <div class="table-header">
                <div class="table-row">
                    <div style="color: white;" class="table-cell-resp">ID</div>
                    <div style="color: white;" class="table-cell">ID</div>
                    <div style="color: white;" class="table-cell-resp">Тип</div>
                    <div style="color: white;" class="table-cell">Тип</div>
                    <div style="color: white;" class="table-cell-resp">Никнейм нарушителя</div>
                    <div style="color: white;" class="table-cell">Никнейм нарушителя</div>
                    <div style="color: white;" class="table-cell-resp">Никнейм модератора</div>
                    <div style="color: white;" class="table-cell">Никнейм модератора</div>
                    <div style="color: white;" class="table-cell-resp">Пункт правил</div>
                    <div style="color: white;" class="table-cell">Пункт правил</div>
                    <div style="color: white;" class="table-cell-resp">Комментарий</div>
                    <div style="color: white;" class="table-cell">Комментарий</div>
                    <div style="color: white;" class="table-cell-resp">Начало наказания</div>
                    <div style="color: white;" class="table-cell">Начало наказания</div>
                    <div style="color: white;" class="table-cell-resp">Конец наказания</div>
                    <div style="color: white;" class="table-cell">Конец наказания</div>
                </div>
            </div>

            <div class="table-body">
                <% bans.forEach((user) => { %>
                  <% if (user.time == 0) { %>
                    <% var perm = "никогда"; %>
                    <% } else { %>
                      <% var enddate = moment(new Date(Number(user.time))).utcOffset(3).locale('ru').format('lll'); %>
                      <% } %>
                      <% if (user.type == "BAN") { %>
                        <% var type = "бан"; %>
                        <% }%>
                        <% if (user.type == "TEMPBAN") { %>
                          <% var type = "вр. бан"; %>
                          <% }%>
                          <% if (user.type == "MUTE") { %>
                            <% var type = "мут"; %>
                            <% }%>
                            <% if (user.type == "TEMPMUTE") { %>
                              <% var type = "вр. мут"; %>
                              <% }%>
                          <% if (user.reason == null) { %>
                            <% var srvundef = "неизвестно"; %>
                            <% }%>
                              <% if (user.admin == "CONSOLE") { %>
                                <% var srvconsole = "консоль"; %>
                                  <% }%>
                    <div class="table-row">
                        <div style="background-color: black; color: white;" class="table-cell-resp">ID</div>
                        <div style="background-color: black; color: white;" class="table-cell"><%- user.id || "N/D" %></div>
                        <div style="background-color: black; color: white;" class="table-cell-resp">Тип</div>
                        <div style="background-color: black; color: white;" class="table-cell"><%- type || "неизвестно" %></div>
                        <div style="background-color: black; color: white;" class="table-cell-resp">Никнейм нарушителя</div>
                        <div style="background-color: black; color: white;" class="table-cell"><%- user.username || "неизвестно" %></div>
                        <div style="background-color: black; color: white;" class="table-cell-resp">Никнейм модератора</div>
                        <div style="background-color: black; color: white;" class="table-cell"><%- srvconsole || user.admin || "неизвестно" %></div>
                        <div style="background-color: black; color: white;" class="table-cell-resp">Пункт правил</div>
                        <div style="background-color: black; color: white;" class="table-cell"><%- user.reason || "неизвестно" %></div>
                        <div style="background-color: black; color: white;" class="table-cell-resp">Комментарий</div>
                        <div style="background-color: black; color: white;" class="table-cell"><%- user.comment || "неизвестно" %></div>
                        <div style="background-color: black; color: white;" class="table-cell-resp">Начало наказания</div>
                        <div style="background-color: black; color: white;" class="table-cell"><%- moment(new Date(Number(user.expire))).utcOffset(3).locale('ru').format('lll') || "неизвестно" %></div>
                        <div style="background-color: black; color: white;" class="table-cell-resp">Конец наказания</div>
                        <div style="background-color: black; color: white;" class="table-cell"><%- perm || enddate || "неизвестно" %></div>
                    </div>
                <% }); %>
            </div>
            </div>
        </div>
    </span>
    <section id="banner" class="parallax"></section>
</div>
<%- include('_footer.ejs') %>
